<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="utf-8">
  <title th:text="${event != null} ? 'Registrations — ' + ${event.eventName} : 'Registrations — Unknown Event'">
    Registrations
  </title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Optional: your existing CSS -->
  <link rel="stylesheet" th:href="@{/assets/css/style.css}">
</head>
<body class="bg-slate-100 min-h-screen flex flex-col">

  <!-- Navbar -->
  <nav class="bg-[#134686] text-white shadow-md">
    <div class="max-w-6xl mx-auto px-4">
      <div class="flex items-center justify-between h-16">
        <a th:href="@{/}" class="text-2xl font-bold tracking-wide">
          EventHub
        </a>
        <span class="text-xs sm:text-sm opacity-80">
          Admin • Registrations
        </span>
      </div>
    </div>
  </nav>

  <!-- Main content -->
  <main class="flex-1 max-w-6xl mx-auto px-4 py-8">
    <div class="bg-white rounded-2xl shadow-lg border border-slate-100 p-6 sm:p-8">
      <!-- Header -->
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4">
        <div>
          <h1 class="text-2xl sm:text-3xl font-bold text-slate-900">
            Registrations for:
            <span class="text-[#134686]"
                  th:text="${event != null ? event.eventName : 'Unknown Event'}">
              Event
            </span>
          </h1>
          <p class="text-xs sm:text-sm text-slate-500 mt-1">
            View and manage student registrations for this event.
          </p>
        </div>

        <a th:href="@{/admin/dashboard}"
           class="inline-flex items-center px-3 py-2 rounded-lg text-xs font-semibold
                  border border-slate-300 text-slate-700 hover:bg-slate-50 transition">
          ⬅ Back to Dashboard
        </a>
      </div>

      <!-- Flash messages -->
      <div class="space-y-2 mb-4">
        <div th:if="${message}"
             th:text="${message}"
             class="text-xs sm:text-sm text-emerald-700 bg-emerald-50 border border-emerald-200 rounded-lg px-3 py-2">
        </div>
        <div th:if="${error}"
             th:text="${error}"
             class="text-xs sm:text-sm text-red-700 bg-red-50 border border-red-200 rounded-lg px-3 py-2">
        </div>
      </div>

      <!-- No registrations -->
      <div th:if="${#lists.isEmpty(registrations)}"
           class="text-sm text-slate-500 bg-slate-50 border border-dashed border-slate-200 rounded-xl px-4 py-6 text-center">
        No students have registered for this event yet.
      </div>

      <!-- Registration table -->
      <div th:if="${!#lists.isEmpty(registrations)}" class="mt-4">
        <div class="overflow-x-auto rounded-xl border border-slate-100">
          <table class="min-w-full text-sm">
            <thead>
              <tr class="bg-slate-50 text-xs font-semibold text-slate-500 uppercase tracking-wide">
                <th class="px-4 py-3 text-left">Student ID</th>
                <th class="px-4 py-3 text-left">Name</th>
                <th class="px-4 py-3 text-left">Department</th>
                <th class="px-4 py-3 text-left">Registered At</th>
                <th class="px-4 py-3 text-center">Action</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-slate-100">
              <tr th:each="r : ${registrations}" class="hover:bg-slate-50">
                <td class="px-4 py-2" th:text="${r.studentId}">1</td>
                <td class="px-4 py-2 font-medium text-slate-800"
                    th:text="${r.firstName + ' ' + r.lastName}">
                  Student Name
                </td>
                <td class="px-4 py-2 text-slate-700" th:text="${r.department}">Dept</td>
                <td class="px-4 py-2 text-slate-600"
                    th:text="${#temporals.format(r.registeredAt, 'yyyy-MM-dd HH:mm')}">
                  2025-11-08 19:00
                </td>
                <td class="px-4 py-2 text-center">
                  <form th:action="@{|/admin/events/${event.eventId}/registrations/delete/${r.id}|}"
                        method="post" class="inline">
                    <button type="submit"
                            onclick="return confirm('Delete this registration?')"
                            class="inline-flex items-center px-3 py-1 rounded-full text-[11px] font-semibold
                                   bg-red-100 text-red-700 hover:bg-red-200 transition">
                      Delete
                    </button>
                  </form>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Back button (mobile helper) -->
      <div class="mt-4 sm:hidden text-center">
        <a th:href="@{/admin/dashboard}"
           class="inline-flex items-center text-xs font-semibold text-[#134686] hover:text-[#0b2646]">
          ⬅ Back to Dashboard
        </a>
      </div>
    </div>
  </main>

</body>
</html>
